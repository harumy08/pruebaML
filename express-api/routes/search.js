const products = [
	{
	 "id":"1",
	 "author": {
		"name": "Sergio",
		"lastname": "Castillo"
		},
	  "categories": ['Tecnología',':celulares','Telefonía'],
	  "tag": ":celulares",
	  items: [
		{
		"id": "MLM16069878",
		"title": "iPhone X 64 GB gris espacial",
		"price": {
		"currency": "MXN",
		"amount": "5999",
		"decimals": "00"
		},
		"picture": "https://http2.mlstatic.com/D_NQ_NP_778734-MLA43711395812_102020-O.webp",
		"condition": "Nuevo",
		"free_shipping": "1",
		"location": "Ciudad de México",
		"sold_quantity": "10",
		"description": 'Doble cámara y más detalles\r\nSus 2 cámaras traseras de 12 Mpx/12 Mpx te permitirán tomar imágenes con más detalles y lograr efectos únicos como el famoso modo retrato de poca profundidad de campo.\r\n\r\nAdemás, el dispositivo cuenta con cámara frontal de 7 Mpx para que puedas sacarte divertidas selfies o hacer videollamadas.\r\nMás para ver\r\nCon su pantalla OLED de 5.8\", disfruta de colores intensos y mayor nitidez en todos tus contenidos.\r\n\r\nMayor rendimiento\r\nSu memoria RAM de 3 GB permite que tu smartphone funcione de manera fluida y sin demoras al realizar distintas tareas, jugar o navegar.\r\n\r\nReconocimiento facial para mayor seguridad\r\nAcerca el dispositivo a tu rostro para desbloquearlo instantáneamente. Su precisa tecnología de reconocimiento facial te garantiza un acceso al equipo rápido y seguro.\r\n\r\nBatería para todo el día\r\nSu batería de 2716 mAh se adapta a tu ritmo de vida y te garantiza energía para toda una jornada con una sola carga.\r\n\r\nGran capacidad de almacenamiento\r\nCon su memoria interna de 64 GB siempre tendrás espacio para almacenar archivos y documentos importantes. Además, podrás guardar películas, series y videos para reproducirlos cuando quieras sin conexión.'
		},
	]
	},
	{
		"id":"2",
		"author": {
		   "name": "Adriana",
		   "lastname": "Muñoz"
		   },
		 "categories": ['Tecnología',':celulares','Telefonía'],
		 "tag": ":celulares",
		 items: [
		   {
		   "id": "MLM-1392572571",
		   "title": "Celular Samsung Galaxy A13 128gb + 4gb Ram Liberado Negro",
		   "price": {
		   "currency": "MXN",
		   "amount": "4099",
		   "decimals": "00"
		   },
		   "picture": "https://http2.mlstatic.com/D_NQ_NP_615549-MLA49377079537_032022-O.webp",
		   "condition": "Usado",
		   "free_shipping": "0",
		   "location": "Ciudad de México",
		   "sold_quantity": "1751",
		   "description": 'Más pantalla significa más espacio para jugar\r\nCon la pantalla Infinity-V de 6,6 pulgadas vas a disfrutar detalles que nunca antes habías notado. Su tecnología FHD + te asegura siempre contenido claro y nítido.\r\n\r\nEmbelesa tus sentidos\r\nGalaxy A13 combina colores clásicos con una textura suave al contacto. Sus curvas refinadas lo hacen fácil de sostener, brindando una cómoda experiencia en el uso de la pantalla.\r\n\r\nMejora tu fotografía con Quad Camera\r\nCaptura momentos memorables con la cámara principal de 50 MP. Amplía el ángulo de visión con la cámara ultra ancha. Personaliza el enfoque con la cámara de profundidad o acércate a los detalles con la cámara macro.\r\n\r\nCámara ultra ancha, experiencias ultra anchas\r\nSimilar a la vista humana, la cámara ultra ancha de 5MP ve el mundo con un ángulo de visión de 123 grados, agregando más perspectiva a tus capturas.'
		   },
	   ]
	   },
	   {
		"id":"3",
		"author": {
		   "name": "Jazz",
		   "lastname": "Valdez"
		   },
		 "categories": ['Tecnología',':celulares','Telefonía'],
		 "tag": ":celulares",
		 items: [
		   {
		   "id": "MLM18924349",
		   "title": "Xiaomi Redmi Note 11 (Snapdragon) Dual SIM 128 GB azul ocaso 4 GB RAM",
		   "price": {
		   "currency": "MXN",
		   "amount": "3930",
		   "decimals": "00"
		   },
		   "picture": "https://http2.mlstatic.com/D_NQ_NP_843694-MLA49654654831_042022-O.webp",
		   "condition": "Reacondicionado",
		   "free_shipping": "1",
		   "location": "Guadalajara, Jalisco",
		   "sold_quantity": "111",
		   "description": 'Fotografía profesional en tu bolsillo\r\nDescubre infinitas posibilidades para tus fotos con las 4 cámaras principales de tu equipo. Pon a prueba tu creatividad y juega con la iluminación, diferentes planos y efectos para obtener grandes resultados.\r\n\r\nExperiencia visual increíble\r\nMira tus series y películas favoritas con la mejor definición a través de su pantalla AMOLED de 6.43\". Disfruta de colores brillantes y detalles precisos en todos tus contenidos.'
		   },
	   ]
	   },
	   {
		"id":"4",
		"author": {
		   "name": "Susana",
		   "lastname": "Keymolen"
		   },
		 "categories": ['Tecnología',':celulares','Telefonía'],
		 "tag": ":celulares",
		 items: [
		   {
		   "id": "MLM9428048",
		   "title": "Apple iPhone XR 128 GB - Negro",
		   "price": {
		   "currency": "MXN",
		   "amount": "12999",
		   "decimals": "00"
		   },
		   "picture": "https://http2.mlstatic.com/D_NQ_NP_789949-MLA46597380759_072021-O.webp",
		   "condition": "Nuevo",
		   "free_shipping": "1",
		   "location": "Edo.Mex",
		   "sold_quantity": "1088",
		   "description": 'El iPhone XR viene con una pantalla Liquid Retina de 6.1 pulgadas (2) y está disponible en seis colores increíbles.\r\nEl avanzado sistema Face ID te permite desbloquearlo de forma segura e iniciar sesión en tus apps con sólo una mirada.\r\nEl chip A12 Bionic usa el aprendizaje automático en tiempo real para llevar aún más allá todo lo que puedes hacer con tus fotos, juegos, realidad aumentada y más.\r\nEl sistema de cámara única de 12 MP con modo Retrato, Iluminación de Retrato, bokeh mejorado y Control de Profundidad te permite tomar retratos con calidad de estudio. Además, es resistente al agua. (3)'
		   },
	   ]
	   },   
];
const router = (app) => {
	app.get("/", (request, response) => {
		response.send({
			message: "Node.js and Express REST API",
		});
	});
	app.get("/search", (request, response) => {
		let tag = request.query.q;
		console.log(tag)

		const getList = (tagProduct) => {
			return products.filter(
		       (product) => product.tag === tagProduct,
			) || {};
		  }


		response.send(getList(tag));
	});

	app.get("/items/:id", (request, response) => {
		let item = request.params.id;

        console.log(item)

		const locateProduct = (idProduct) => {
			return products.filter(
			  (product) => product.id === idProduct,
			)[0] || {};
		  }

		response.send(locateProduct(item))
	});
};
export default router;

